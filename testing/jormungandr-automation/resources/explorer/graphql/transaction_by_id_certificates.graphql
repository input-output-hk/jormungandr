query TransactionByIdCertificates($id: String!){
    transaction(id: $id) {
        id
        blocks{id date{...blockDate}} #TODO check all the block parameters
        inputs{amount address{id}}
        outputs{amount address{id}}
        certificate{
            __typename
            ... on StakeDelegation {account{id #delegation {... poolInfo} not implemented yet NPG-2247
                                    }
                                    pools {... poolInfo}}
            ... on OwnerStakeDelegation {pools {... poolInfo}}
            ... on PoolRegistration {pool {... poolInfo}
                                    startValidity
                                    managementThreshold
                                    owners
                                    operators
                                    rewards {fixed ratio {numerator denominator} maxLimit}
                                    rewardAccount {id #delegation {... poolInfo} not implemented yet NPG-2247
                                    }
                                    }
            ... on PoolRetirement {poolId retirementTime}
            ... on PoolUpdate {poolId startValidity}
            ... on VotePlan{voteStart{...blockDate}
                            voteEnd{...blockDate}
                            committeeEnd{...blockDate}
                            payloadType
                            proposals {externalId}
                            }
            ... on VoteCast {votePlan proposalIndex}
            ... on VoteTally {votePlan}
            ... on UpdateProposal {changes {...configParams}
                                    proposerId{id}
                                }
            ... on UpdateVote{proposalId voterId{id}}
            ... on MintToken{name}
            ... on EvmMapping {address}
    }}
}

fragment poolInfo on Pool {
        id
        blocks(first: 1000){totalCount}
        registration{pool{id}}
        retirement{poolId}
    }

fragment blockDate on BlockDate{
                            epoch{id}
                            slot
                        }

fragment configParams on ConfigParams
{
 __typename
 #Block0Date | Discrimination | ConsensusType | SlotsPerEpoch | SlotDuration | EpochStabilityDepth | Milli | BlockContentMaxSize | AddBftLeader | RemoveBftLeader | LinearFee | ProposalExpiration | KesUpdateSpeed | TreasuryAdd | TreasuryParams | RewardPot | RewardParams | PerCertificateFee | FeesInTreasury | RewardLimitNone | RewardLimitByAbsoluteStake | PoolRewardParticipationCapping | AddCommitteeId | RemoveCommitteeId | PerVoteCertificateFee | TransactionMaxExpiryEpochs
}
